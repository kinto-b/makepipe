<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pipeline Tools Inspired by GNU Make â€¢ makepipe</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Pipeline Tools Inspired by GNU Make">
<meta property="og:description" content="A suite of tools for transforming an existing workflow into a
    self-documenting pipeline with very minimal upfront costs. Segments of
    the pipeline are specified in much the same way a Make rule is, by
    declaring an executable recipe (which might be an R script), along
    with the corresponding targets and dependencies. When the entire
    pipeline is run through, only those recipes that need to be executed
    will be. Meanwhile, execution metadata is captured behind the scenes
    for later inspection.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">makepipe</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/makepipe.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kinto-b/makepipe/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="makepipe-">makepipe <img src="reference/figures/logo.png" align="right" height="139"><a class="anchor" aria-label="anchor" href="#makepipe-"></a>
</h1></div>
<!-- badges: start -->
<p>The goal of <code>makepipe</code> is to allow for the construction of make-like pipelines in R with very minimal overheads. In contrast to <code>targets</code> (and its predecessor <code>drake</code>) which offers an opinionated pipeline framework that demands highly functionalised code, <code>makepipe</code> is easy-going, being adaptable to a wide range of data science workflows.</p>
<p>A minimal example can be found here: <a href="https://github.com/kinto-b/makepipe_example" class="external-link uri">https://github.com/kinto-b/makepipe_example</a></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the released version of <code>makepipe</code> from <a href="https://CRAN.R-project.org" class="external-link">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"makepipe"</span><span class="op">)</span></code></pre></div>
<p>And the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"kinto-b/makepipe"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="building-a-pipeline">Building a pipeline<a class="anchor" aria-label="anchor" href="#building-a-pipeline"></a>
</h2>
<p>To construct a pipeline, one simply needs to chain together a number of <code>make_with_*()</code> statements. When the pipeline is run through, each <code>make_with_*()</code> block is evaluated if and only if the <code>targets</code> are out-of-date with respect to the <code>dependencies</code> (and <code>source</code> file). But, whether or not the block is evaluated, a segment will be added to the Pipeline object behind the scenes. At the end of the script, once the entire pipeline has been run through, one can display the accumulated Pipeline object to produce a flow-chart visualisation of the pipeline. For example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/make_with_source.html">make_with_source</a></span><span class="op">(</span>
  note <span class="op">=</span> <span class="st">"Clean raw survey data and do derivations"</span>,
  source <span class="op">=</span> <span class="st">"one.R"</span>,
  targets <span class="op">=</span> <span class="st">"data/1 data.Rds"</span>,
  dependencies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data/raw.Rds"</span>, <span class="st">"lookup/concordance.csv"</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="reference/make_with_recipe.html">make_with_recipe</a></span><span class="op">(</span>
  label <span class="op">=</span> <span class="st">"Merge it!"</span>,
  note <span class="op">=</span> <span class="st">"Merge demographic variables from population data into survey data"</span>,
  recipe <span class="op">=</span> <span class="op">{</span>
    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"data/1 data.Rds"</span><span class="op">)</span>
    <span class="va">pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"data/pop.Rds"</span><span class="op">)</span>
    <span class="va">merged_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">pop</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">merged_dat</span>, <span class="st">"data/2_data.Rds"</span><span class="op">)</span>
  <span class="op">}</span>,
  targets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data/2 data.Rds"</span><span class="op">)</span>,
  dependencies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data/1 data.Rds"</span>, <span class="st">"data/pop.Rds"</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="reference/make_with_source.html">make_with_source</a></span><span class="op">(</span>
  note <span class="op">=</span> <span class="st">"Convert data from 'wide' to 'long' format"</span>,
  source <span class="op">=</span> <span class="st">"three.R"</span>,
  targets <span class="op">=</span> <span class="st">"data/3 data.Rds"</span>,
  dependencies <span class="op">=</span> <span class="st">"data/2 data.Rds"</span>
<span class="op">)</span>

<span class="fu"><a href="reference/pipeline-vis.html">show_pipeline</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/pipeline_nomnoml_uptodate.png" width="75%" style="display: block; margin: auto;"></p>
<p>We can also get an interactive visNetwork widget:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/pipeline-vis.html">show_pipeline</a></span><span class="op">(</span>as <span class="op">=</span> <span class="st">"visnetwork"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/pipeline_visnetwork_uptodate.png" width="75%" style="display: block; margin: auto;"></p>
<p>Once youâ€™ve constructed a pipeline, you can â€˜cleanâ€™ it (i.e.Â delete all registered targets):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pipeline-accessors.html">get_pipeline</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">p</span><span class="op">$</span><span class="fu">clean</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Then, when you look again at the visualisation, the target nodes will be red not green since theyâ€™re out-of-date:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/pipeline-vis.html">show_pipeline</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/pipeline_nomnoml_outofdate.png" width="75%" style="display: block; margin: auto;"></p>
<p>And then you can â€˜rebuildâ€™ to re-execute the entire pipeline and re-create the cleaned targets:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pipeline-accessors.html">get_pipeline</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">p</span><span class="op">$</span><span class="fu">build</span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=makepipe" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/kinto-b/makepipe/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/kinto-b/makepipe/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing makepipe</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Kinto Behr <br><small class="roles"> Author, maintainer, copyright holder </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://app.codecov.io/gh/kinto-b/makepipe?branch=master" class="external-link"><img src="https://codecov.io/gh/kinto-b/makepipe/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/kinto-b/makepipe/actions" class="external-link"><img src="https://github.com/kinto-b/makepipe/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://CRAN.R-project.org/package=makepipe" class="external-link"><img src="https://www.r-pkg.org/badges/version/makepipe" alt="CRAN status"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Kinto Behr.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
